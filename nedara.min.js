/**
 * NedaraJS - Minimalist JavaScript Framework
 * =========================================
 *
 * @project    NedaraJS
 * @version    0.1.2-alpha
 * @license    MIT
 * @copyright  (c) 2025 Nedara Project
 * @author     Andrea Ulliana
 *
 * @repository https://github.com/Nedara-Project/nedarajs
 * @overview   Lightweight framework for component-based web development
 *
 * @published  2025-04-07
 * @modified   2025-07-24
 */
"use strict";const Nedara=function(t){const e={};let n=null;return{widgets:e,registerWidget:function(t,n){e[t]=n},createWidget:function(e){const n={container:document,selector:"",events:{"click [data-js-function]":"_fnTrigger"},start:function(){},end:function(){},_fnTrigger:function(e){const n=t(e.currentTarget).data("jsFunction");n&&this[n](e)}};e.events=Object.assign(n.events,e.events),e._fnTrigger=n._fnTrigger;const r={...n,...e,init:function(){this._bindEvents(),this._checkSelectorAndContainer()&&(this.$container=t(this.container),this.$selector=t(this.selector),this.start())},_checkSelectorAndContainer:function(){const e=t(this.container);return e.length&&(""===this.selector||e.find(this.selector).length)},_bindEvents:function(){const e=this,n=t(this.container);Object.keys(this.events||{}).forEach((t=>{const[r,i]=t.split(" "),s=this[this.events[t]];s&&n.on(r,this.selector+(i?" "+i:""),(function(t){s.call(e,t)}))}))},refresh:function(){this._bindEvents()},destroy:function(){this.end();const e=t(this.container);Object.keys(this.events||{}).forEach((t=>{const[n,r]=t.split(" ");e.off(n,this.selector+(r?" "+r:""))}))},extend:function(t){const e=Object.assign({},this,t);return e.events={...this.events,...t.events},e}};return r.init(),r},importTemplates:async function(t){try{const e=await fetch(t),r=await e.text(),i=new DOMParser;n=i.parseFromString(r,"text/html")}catch(t){console.error("Error while importing template:",t)}},renderTemplate:function(t,e={}){const r=function(t){if(!n)return console.error("Templates were not imported"),null;const e=n.getElementById(t);return e?e.innerHTML.trim():(console.error(`Template with ID "${t}" was not found`),null)}(t);if(!r)return"";let i=function t(e,n){return e.replace(/\{\{#(\w+)\}\}([\s\S]*?)\{\{\/\1\}\}/gm,((e,r,i)=>{const s=n[r];return s&&Array.isArray(s)?s.map((e=>{let n=i;return n=n.replace(/\{\{#if (\w+)\}\}([\s\S]*?)\{\{\/if\}\}/gm,((t,n,r)=>{if(e[n]){return r.split("{{else}}")[0].trim()}if(r.includes("{{else}}")){return r.split("{{else}}")[1].trim()}return""})),n=n.replace(/\{\{(\w+)\}\}/g,((t,n)=>e.hasOwnProperty(n)?e[n]:t)),n=t(n,e),n})).join(""):""}))}(r,e);return i=function t(e,n){return e.replace(/\{\{#if (\w+)\}\}([\s\S]*?)\{\{\/if\}\}/gm,((e,r,i)=>{const s=n[r],c=t(i,n);if(s){return c.split("{{else}}")[0].trim()}if(i.includes("{{else}}")){return c.split("{{else}}")[1].trim()}return""}))}(i,e),i=i.replace(/\{\{#if (\w+)\}\}([\s\S]*?)\{\{\/if\}\}/gm,((t,n,r)=>e[n]?r.split("{{else}}")[0].trim():r.includes("{{else}}")?r.split("{{else}}")[1].trim():"")),i=i.replace(/\{\{(\w+)\}\}/gm,((t,n)=>e.hasOwnProperty(n)?e[n]:t)),i=i.replace(/nedara-(\w+)/g,"$1"),i},registeredWidgets:e}}(jQuery);export default Nedara;

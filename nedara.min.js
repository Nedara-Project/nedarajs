/**
 * NedaraJS - Minimalist JavaScript Framework
 * =========================================
 *
 * @project    NedaraJS
 * @version    0.1.3-alpha
 * @license    MIT
 * @copyright  (c) 2025 Nedara Project
 * @author     Andrea Ulliana
 *
 * @repository https://github.com/Nedara-Project/nedarajs
 * @overview   Lightweight framework for component-based web development
 *
 * @published  2025-04-07
 * @modified   2025-08-15
 */
"use strict";const Nedara=function(t){const e={};let n=null;function r(t,e){return e.split(".").reduce(((t,e)=>{if(t&&"object"==typeof t&&e in t)return t[e]}),t)}function i(t,e){const n=t.replace(/\b[\w.]+\b/g,(t=>{const n=r(e,t);return void 0!==n?"string"==typeof n?JSON.stringify(n):n:t}));try{return Function('"use strict"; return ('+n+")")()}catch(e){return console.error("Error evaluating expression:",t,e),!1}}return{widgets:e,registerWidget:function(t,n){e[t]=n},createWidget:function(e){const n={container:document,selector:"",events:{"click [data-js-function]":"_fnTrigger"},start:function(){},end:function(){},_fnTrigger:function(e){const n=t(e.currentTarget).data("jsFunction");n&&this[n](e)}};e.events=Object.assign(n.events,e.events),e._fnTrigger=n._fnTrigger;const r={...n,...e,init:function(){this._bindEvents(),this._checkSelectorAndContainer()&&(this.$container=t(this.container),this.$selector=t(this.selector),this.start())},_checkSelectorAndContainer:function(){const e=t(this.container);return e.length&&(""===this.selector||e.find(this.selector).length)},_bindEvents:function(){const e=this,n=t(this.container);Object.keys(this.events||{}).forEach((t=>{const[r,i]=t.split(" "),s=this[this.events[t]];s&&n.on(r,this.selector+(i?" "+i:""),(function(t){s.call(e,t)}))}))},refresh:function(){this._bindEvents()},destroy:function(){this.end();const e=t(this.container);Object.keys(this.events||{}).forEach((t=>{const[n,r]=t.split(" ");e.off(n,this.selector+(r?" "+r:""))}))},extend:function(t){const e=Object.assign({},this,t);return e.events={...this.events,...t.events},e}};return r.init(),r},importTemplates:async function(t){try{const e=await fetch(t),r=await e.text(),i=new DOMParser;n=i.parseFromString(r,"text/html")}catch(t){console.error("Error while importing template:",t)}},renderTemplate:function(t,e={}){const s=function(t){if(!n)return console.error("Templates were not imported"),null;const e=n.getElementById(t);return e?e.innerHTML.trim():(console.error(`Template with ID "${t}" was not found`),null)}(t);if(!s)return"";function c(t,e){return t.replace(/\{\{#if (.+?)\}\}([\s\S]*?)\{\{\/if\}\}/gm,((t,n,r)=>{const s=i(n.trim(),e),o=c(r,e);if(s){return o.split("{{else}}")[0].trim()}if(r.includes("{{else}}")){return o.split("{{else}}")[1].trim()}return""}))}function o(t,e){return t.replace(/\{\{#subif (.+?)\}\}([\s\S]*?)\{\{\/subif\}\}/gm,((t,n,r)=>{const s=i(n.trim(),e),o=c(r,e);if(s){return o.split("{{subelse}}")[0].trim()}if(r.includes("{{subelse}}")){return o.split("{{subelse}}")[1].trim()}return""}))}let u=function t(e,n){return e.replace(/\{\{#([\w.]+)\}\}([\s\S]*?)\{\{\/\1\}\}/gm,((e,i,s)=>{const u=r(n,i);return u&&Array.isArray(u)?u.map((e=>{let n=s;return n=c(n,e),n=o(n,e),n=n.replace(/\{\{([\w.]+)\}\}/g,((t,n)=>{const i=r(e,n);return void 0!==i?i:t})),n=t(n,e),n})).join(""):""}))}(s,e);return u=c(u,e),u=o(u,e),u=u.replace(/\{\{#if (.+?)\}\}([\s\S]*?)\{\{\/if\}\}/gm,((t,n,r)=>i(n.trim(),e)?r.split("{{else}}")[0].trim():r.includes("{{else}}")?r.split("{{else}}")[1].trim():"")),u=u.replace(/\{\{([\w.]+)\}\}/gm,((t,n)=>{const i=r(e,n);return void 0!==i?i:t})),u=u.replace(/nedara-(\w+)/g,"$1"),u},registeredWidgets:e}}(jQuery);export default Nedara;

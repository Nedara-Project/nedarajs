/**
 * NedaraJS - Minimalist JavaScript Framework
 * =========================================
 *
 * @project    NedaraJS
 * @version    0.1.0-alpha
 * @license    MIT
 * @copyright  (c) 2025 Nedara Project
 * @author     Andrea Ulliana
 *
 * @repository https://github.com/Nedara-Project/nedarajs
 * @overview   Lightweight framework for component-based web development
 *
 * @published  2025-04-07
 * @modified   2025-04-07
 */ "use strict";let Nedara=function(e){let t={},n=null;async function r(e){try{let t=await fetch(e),r=await t.text(),i=new DOMParser;n=i.parseFromString(r,"text/html")}catch(s){console.error("Error while importing template:",s)}}function i(e,n){t[e]=n}return{widgets:t,registerWidget:i,createWidget:function t(n){let r={container:document,selector:"",events:{"click [data-js-function]":"_fnTrigger"},start:function(){},end:function(){},_fnTrigger:function(t){let n=e(t.currentTarget).data("jsFunction");n&&this[n](t)}};n.events=Object.assign(r.events,n.events),n._fnTrigger=r._fnTrigger;let i={...r,...n,init:function(){this._bindEvents(),this._checkSelectorAndContainer()&&(this.$container=e(this.container),this.$selector=e(this.selector),this.start())},_checkSelectorAndContainer:function(){let t=e(this.container);return t.length&&(""===this.selector||t.find(this.selector).length)},_bindEvents:function(){let t=this,n=e(this.container);Object.keys(this.events||{}).forEach(e=>{let[r,i]=e.split(" "),s=this[this.events[e]];s&&n.on(r,this.selector+(i?" "+i:""),function(e){s.call(t,e)})})},refresh:function(){this._bindEvents()},destroy:function(){this.end();let t=e(this.container);Object.keys(this.events||{}).forEach(e=>{let[n,r]=e.split(" ");t.off(n,this.selector+(r?" "+r:""))})},extend:function(e){let t=Object.assign({},this,e);return t.events={...this.events,...e.events},t}};return i.init(),i},importTemplates:r,renderTemplate:function e(t,r={}){let i=function e(t){if(!n)return console.error("Templates were not imported"),null;let r=n.getElementById(t);return r?r.innerHTML.trim():(console.error(`Template with ID "${t}" was not found`),null)}(t);if(!i)return"";let s=function e(t,n){return t.replace(/\{\{#(\w+)\}\}([\s\S]*?)\{\{\/\1\}\}/gm,(t,r,i)=>n[r]&&Array.isArray(n[r])?n[r].map(t=>{let n=i.replace(/\{\{(\w+)\}\}/g,(e,n)=>t.hasOwnProperty(n)?t[n]:e);return e(n,t)}).join(""):"")}(i,r);return(s=(s=s.replace(/\{\{#if (\w+)\}\}([\s\S]*?)\{\{\/if\}\}/gm,(e,t,n)=>{let i=r[t];if(i){let s=n.split("{{else}}")[0];return s.trim()}if(n.includes("{{else}}")){let l=n.split("{{else}}")[1];return l.trim()}return""})).replace(/\{\{(\w+)\}\}/gm,(e,t)=>r.hasOwnProperty(t)?r[t]:e)).replace(/nedara-(\w+)/g,"$1")},registeredWidgets:t}}(jQuery);export default Nedara;
